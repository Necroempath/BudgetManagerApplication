<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Budget Manager App</title>

    <link rel="stylesheet" href="/frontend/css/style.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>

<body class="bg-light p-4">
    <header class="mb-4">
        <div class="container">
            <menu class="row flex-nowrap justify-content-between">
                <div class="col-auto d-flex flex-row gap-2">
                    <div class="dropdown">
                        <button id="currencyDropdownBtn" type="button" data-bs-toggle="dropdown" aria-expanded="false"
                            class="btn btn-dark d-flex gap-2 align-items-center dropdown-toggle"><i
                                class="fa-solid fa-globe fs-4"></i>
                            <span id="selected-currency" class="fs-6 fw-semibold">AZN</span></button>
                        <ul class="dropdown-menu bg-dark" id="currencyDropdown">
                        </ul>
                    </div>
                    <button class="btn btn-dark" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasExample" aria-controls="offcanvasExample"><i
                            class="fa-solid fa-filter text-white"></i></button>
                </div>
                <div class="col-auto">
                    <button class="btn btn-dark" type="file">Import</button> 
                    <button class="btn btn-dark" type="file">Export</button> 
                </div>
            </menu>
        </div>
    </header>
    <div class="container">
        <div class="card shadow-sm p-4 mx-auto" style="max-width: 600px;">
            <div class=" border-bottom">
                <h4 class="mb-3">Add Operation</h4>
            </div>
            <form class="mt-3" id="addForm" class="needs-validation" novalidate>
                <div class="mb-3">
                    <label for="type" class="form-label">Type</label>
                    <select id="type" name="type" class="form-select" required>
                        <option value="" hidden selected disabled>Choose type...</option>
                        <option value=0>Income</option>
                        <option value=1>Expense</option>
                    </select>
                    <div class="invalid-feedback">Please select operation type.</div>
                </div>

                <div class="mb-3">
                    <label for="category" class="form-label">Category</label>
                    <select id="category" name="category" class="form-select" required>
                        <option value="" selected disabled>Choose type first</option>
                    </select>
                    <div class="invalid-feedback">Please select category.</div>
                </div>

                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" id="name" name="name" class="form-control" placeholder="Enter operation name"
                        required>
                    <div class="invalid-feedback">Please enter a name.</div>
                </div>

                <div class="mb-3">
                    <label for="amount" class="form-label">Amount</label>
                    <div class="input-group">
                        <span class="input-group-text" id="currency"></span>
                        <input type="number" id="amount" name="amount" class="form-control" placeholder="0.00"
                            min="0.01" step="0.01" required>
                        <div class="invalid-feedback">Enter a valid amount greater than 0.</div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="date" class="form-label">Date</label>
                    <input type="date" id="date" name="date" class="form-control" required>
                    <div class="invalid-feedback">Please select a date within ±3 years from today.</div>
                </div>
            </form>

            <button id="addBtn" class="btn btn-dark w-100">Add Operation</button>

        </div>
        <div class="w-100 d-flex mt-5 rounded-5 overflow-hidden">
            <input id="search" type="text" class="form-control rounded-start-5 rounded-end-0"
                placeholder="Search by name..." />
            <button id="searchBtn" class="btn btn-dark w-25 rounded-start-0">Find</button>
        </div>
        <div id="totals"
            class="w-100 d-flex mt-3 rounded-5 overflow-hidden justify-content-around bg-dark text-light py-2">
            <span class="text-sm-7 text-md-6 text-lg-5 fw-semibold">Incomes: <span id="inc-sum"></span></span>
            <span class="text-sm-7 text-md-6 text-lg-5 fw-semibold">Expenses: <span id="exp-sum"></span></span>
            <span class="text-sm-7 text-md-6 text-lg-5 fw-semibold">Profit: <span id="total"></span></span>
        </div>
        <table class="table table-striped table-hover mt-3 text-sm-8 text-md-7 text-lg-6">
            <thead class="table-dark">
                <tr>
                    <th scope="col" class="ps-2">Type</th>
                    <th scope="col">Category</th>
                    <th scope="col">Name <i data-param="name" data-type="string" class="fa-solid fa-sort sorter"></i>
                    </th>
                    <th scope="col">Amount <i data-param="amount" data-type="number"
                            class="fa-solid fa-sort sorter"></i></th>
                    <th scope="col">Date <i data-param="date" data-type="string" class="fa-solid fa-sort sorter"></i>
                    </th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>

    </div>
    <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Operation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id="editBtn" class="btn btn-dark">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <div class="offcanvas offcanvas-start" tabindex="-1" data-bs-scroll="true" id="offcanvasExample"
        aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">Filtering Operations</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <form id="filterForm" class="d-flex flex-column gap-4">

                <div class="btn-group d-flex" role="group">
                    <input type="radio" value=-1 class="btn-check" name="btnradio" id="all" autocomplete="off" checked>
                    <label class="btn btn-outline-dark w-100 text-center" for="all">All</label>

                    <input type="radio" value=0 class="btn-check" name="btnradio" id="incomes" autocomplete="off">
                    <label class="btn btn-outline-dark w-100 text-center" for="incomes">Incomes</label>

                    <input type="radio" value=1 class="btn-check" name="btnradio" id="expenses" autocomplete="off">
                    <label class="btn btn-outline-dark w-100 text-center" for="expenses">Expenses</label>
                </div>
                <fieldset class="border p-3 rounded">
                    <legend class="float-none w-auto px-2">Сurrencies</legend>
                    <div id="currencyInput" class="row">
                </fieldset>


                <div class="row g-3">
                    <div class="col-6">
                        <label for="minAmount" class="form-label">Min amount</label>
                        <input type="number" class="form-control" id="minAmount" name="minAmount" placeholder="0"
                            min="0" step="0.01">
                        <div class="invalid-feedback">Enter amount more or equal to 0.</div>
                    </div>

                    <div class="col-6">
                        <label for="maxAmount" class="form-label">Max amount</label>
                        <input type="number" class="form-control" name="maxAmount" id="maxAmount" min="0" step="0.01">
                        <div class="invalid-feedback">Max amount must be more or equal to min amount.</div>
                    </div>
                </div>

                <div class="row g-3">
                    <div class="col-6">
                        <label for="dateFrom" class="form-label">Date from</label>
                        <input type="date" class="form-control" name="dateFrom" id="dateFrom">
                    </div>

                    <div class="col-6">
                        <label for="dateTo" class="form-label">Date to</label>
                        <input type="date" class="form-control" name="dateTo" id="dateTo">
                        <div class="invalid-feedback">End date must be after start date.</div>
                    </div>
                </div>
                <div class="col d-flex justify-content-center">
                    <button type="button" id="clearForm" class="btn btn-secondary w-100">Clear form</button>
                </div>
                <div class="col d-flex gap-3 mt-5">
                    <button type="button" id="resetFilters" class="btn btn-secondary w-50">Reset</button>
                    <button type="button" id="applyFilters" class="btn btn-dark w-50">Apply filters</button>
                </div>

            </form>


        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="frontend/client.js" type="module">
    </script>